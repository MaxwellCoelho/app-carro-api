"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2936],{2936:(l,p,n)=>{n.r(p),n.d(p,{MelhoresPageModule:()=>b});var d=n(655),m=n(2096),w=n(9808),u=n(5649),z=n(4182),M=n(3028),y=n(3347),B=n(1301),I=n(5907),g=n(6847),C=n(967),x=n(6364),c=n(7091),P=n(9265);let s=class{constructor(o,e,i,a){this.dbService=o,this.toastController=e,this.router=i,this.utils=a,this.nav=B.k,this.bestModels=[],this.page=1,this.pagination=20}ngOnInit(){this.getBestModels()}ionViewWillEnter(){this.utils.getShouldUpdate("bests")&&(this.utils.setShouldUpdate(["bests"],!1),this.bestModels=[],this.page=1,this.pagination=20,this.getBestModels())}getBestModels(){1===this.page&&(this.showLoader=!0);const o=this.dbService.getItens(C.N.bestModelsAction,this.page.toString(),this.pagination.toString()).subscribe(e=>{o.closed||o.unsubscribe();const i=this.setModelAverages(e.bestModels);this.bestModels=[...this.bestModels,...i],1===this.page&&(this.showLoader=!1),this.page++},e=>{this.showErrorToast(e)})}setModelAverages(o){const e=[],i=this.utils.recoveryCreatedItem("createdBrand"),a=this.utils.recoveryCreatedItem("createdModel");return o.forEach(r=>{const h=!r.brand.review||r.brand.review&&i.find(t=>t._id===r.brand._id),R=!r.review||r.review&&a.find(t=>t._id===r._id);if(r.brand.active&&r.active&&h&&R){const t=r.average,A=t?parseInt(t,10):0,F=x.nV.slice().find(S=>A===S.value)||x.kj;r.average=F,e.push(r)}}),e}showErrorToast(o){let e;switch(o.status){case 404:e=g.Hi;break;case 401:e=g.WY;break;default:e=g.tJ}this.showLoader=!1,console.error(o),this.toastController.create({header:"Aten\xe7\xe3o!",message:e,duration:4e3,position:"middle",icon:"warning-outline",color:"danger"}).then(i=>{i.present()})}clickCarItem(o,e,i){const a=o.target.id,h=`/${!a||a.includes("item-img")||a.includes("item-label")?"opiniao":"opinar"}/${e}/${i}`;this.router.navigate([h])}onIonInfinite(o){this.bestModels.length===(this.page-1)*this.pagination&&this.getBestModels(),setTimeout(()=>{o.target.complete()},500)}};s.ctorParameters=()=>[{type:I.T},{type:u.yF},{type:c.F0},{type:P.F}],s=(0,d.gn)([(0,m.wA2)({selector:"app-melhores",template:M,styles:[y]})],s);var k=n(3529);const L=[{path:"",component:s}];let v=class{};v=(0,d.gn)([(0,m.LVF)({imports:[c.Bz.forChild(L)],exports:[c.Bz]})],v);let b=class{};b=(0,d.gn)([(0,m.LVF)({imports:[w.ez,z.u5,u.Pc,k.m,v],declarations:[s]})],b)},3347:l=>{l.exports=".model-image {\n  max-width: 120px;\n  width: 100%;\n}\n\n.brand-image-title {\n  text-align: right;\n}\n\n.item-button {\n  --padding-start: 0;\n  --inner-padding-end: 0;\n}\n\n.item-button ion-grid {\n  margin: 1rem 0;\n}\n\n.item-button .position {\n  border: 1px solid var(--ion-color-medium);\n  text-align: right;\n  padding: 3px 5px 2px 0;\n  font-weight: bolder;\n  font-size: smaller;\n}\n\n.item-button .car-data ion-icon {\n  font-size: 20px;\n  vertical-align: bottom;\n}\n\n.item-button:nth-child(1) .position {\n  border: 0;\n  background-color: var(--ion-color-secondary);\n}\n\n.item-button:nth-child(2) .position {\n  border: 0;\n  background-color: #BDBDBC;\n}\n\n.item-button:nth-child(3) .position {\n  border: 0;\n  background-color: #DB9656;\n}\n\n.average-row {\n  padding: 1rem;\n  border: 3px solid #000;\n  border-radius: 0.5rem;\n}\n\n.average-row ion-label {\n  font-weight: bold;\n  font-size: x-large;\n}\n\n.average-row ion-icon {\n  transform: scale(1);\n  margin-right: 0.8rem;\n  margin-top: -0.5rem;\n  vertical-align: middle;\n}\n\n.average-row .val-bar {\n  display: flex;\n}\n\n.average-row .val-bar div {\n  width: 19%;\n  margin-left: 1%;\n  height: 30px;\n  display: inline-flex;\n  border-radius: 0.4rem;\n  border: 2px dashed rgba(var(--ion-color-medium-rgb), 0.3);\n  border-radius: 0.4rem;\n}\n\n.average-row.otimo {\n  border-color: var(--ion-color-primary);\n}\n\n.average-row.otimo .val-bar div {\n  background-color: var(--ion-color-primary);\n  border: 0;\n}\n\n.average-row.bom {\n  border-color: var(--ion-color-success);\n}\n\n.average-row.bom .val-bar div:not(.box5) {\n  background-color: var(--ion-color-success);\n  border: 0;\n}\n\n.average-row.regular {\n  border-color: var(--ion-color-secondary);\n}\n\n.average-row.regular .val-bar div:not(.box5, .box4) {\n  background-color: var(--ion-color-secondary);\n  border: 0;\n}\n\n.average-row.ruim {\n  border-color: var(--ion-color-danger);\n}\n\n.average-row.ruim .val-bar div:not(.box5, .box4, .box3) {\n  background-color: var(--ion-color-danger);\n  border: 0;\n}\n\n.average-row.pessimo {\n  border-color: var(--ion-color-danger-secondary);\n}\n\n.average-row.pessimo .val-bar div:not(.box5, .box4, .box3, .box2) {\n  background-color: var(--ion-color-danger-secondary);\n  border: 0;\n}\n\n.average-row.indisponivel {\n  border-color: var(--ion-color-medium);\n}\n\n@media (max-width: 576px) {\n  .average-row {\n    padding: 1rem 0.5rem;\n  }\n  .average-row ion-col:nth-child(1) {\n    text-align: center;\n    padding-bottom: 1rem;\n  }\n  .average-row .val-bar div {\n    height: 20px;\n    border-radius: 0.3rem;\n  }\n}\n\n.average-small {\n  border: 0px;\n  padding: 0;\n  padding-bottom: 1rem;\n  margin-top: -0.5rem;\n}\n\n.average-small ion-col {\n  padding-bottom: 0px;\n}\n\n.average-small .item-title {\n  text-align: right;\n}\n\n.average-small .item-title h1 {\n  font-weight: bolder;\n  padding-right: 2rem;\n}\n\n.average-small .item-subtitle {\n  text-align: right;\n}\n\n.average-small .item-subtitle p {\n  margin-top: -6px;\n  color: var(--ion-color-medium);\n  font-size: large;\n  font-weight: lighter;\n  padding-right: 2rem;\n}\n\n.average-small .val-bar {\n  margin-top: 0;\n}\n\n.average-small .val-bar div {\n  height: 15px;\n  margin-left: 1.5%;\n  border-radius: 0.2rem;\n}\n\n@media (max-width: 576px) {\n  .average-small {\n    padding: 0;\n    padding-bottom: 0.5rem;\n    margin-top: -0.5rem;\n  }\n  .average-small .val-bar {\n    margin-top: 0;\n  }\n  .average-small .val-bar div {\n    height: 10px;\n  }\n  .average-small .item-title {\n    text-align: center;\n  }\n  .average-small .item-title h1 {\n    padding-right: 0;\n  }\n  .average-small .item-subtitle {\n    text-align: center;\n  }\n  .average-small .item-subtitle p {\n    padding-right: 0;\n  }\n  .average-small ion-col:nth-child(1) {\n    text-align: center;\n    padding-bottom: 0rem;\n  }\n}"},3028:l=>{l.exports='<ion-content [fullscreen]="true">\r\n  <app-loader [showLoader]="showLoader"></app-loader>\r\n\r\n  <div class="main-container">\r\n    <ion-title size="large" color="primary" class="main-title">\r\n      <ion-icon [name]="nav.best.icon + \'-outline\'" color="secondary"></ion-icon>\r\n      <ion-label>{{nav.best.title}}</ion-label>\r\n    </ion-title>\r\n\r\n    <div class="main-body">\r\n      <ion-list>\r\n        <ion-item *ngIf="!bestModels?.length && !showLoader" lines="none">\r\n          <ion-icon name="alert-circle" color="medium" size="large" class="brand-image"></ion-icon>\r\n          <br>\r\n          <ion-label color="medium" class="ion-text-wrap">N\xe3o encontramos nada no momento. Volte mais tarde!</ion-label>\r\n        </ion-item>\r\n\r\n        <ion-item *ngFor="let model of bestModels; let i = index" class="item-button" routerDirection="root" (click)="clickCarItem($event, model.brand?.url, model?.url)" button>\r\n          <ion-grid>\r\n            <ion-row>\r\n              <ion-col size-lg="0.5" size-md="1" size-sm="1" size-xs="1.5">\r\n                <div class="position">{{i + 1}}</div>\r\n              </ion-col>\r\n              <ion-col size-lg="11" size-md="10" size-sm="10" size-xs="9">\r\n                {{model.brand?.name}} <strong>{{model.name}}</strong>\r\n              </ion-col>\r\n              <ion-col size-lg="0.5" size-md="1" size-sm="1" size-xs="1.5">\r\n                <img src="assets/brands/{{model.brand?.image}}" title="{{model.brand?.name}}" alt="{{model.brand?.name}}"\r\n                  onerror="if (this.src != \'error.jpg\') this.src = \'assets/brands/no-brand.svg\'" class="brand-image-title">\r\n              </ion-col>\r\n            </ion-row>\r\n\r\n            <ion-row>\r\n              <ion-col size-lg="7" size-md="5.5" size-sm="4.25" size-xs="6">\r\n                <img [id]="\'item-img-\'+model.name" src="assets/models/{{model.thumb}}" title="{{model.name}}" alt="{{model.name}}"\r\n                  onerror="if (this.src != \'error.jpg\') this.src = \'assets/models/no-model.png\'" class="model-image">\r\n               </ion-col>\r\n              <ion-col size-lg="5" size-md="6.5" size-sm="7.75" size-xs="6" class="car-data">\r\n                <ion-row class="average-row average-small" [ngClass]="model.average?.id">\r\n                  <ion-col size-md="12" size-sm="12" size-xs="12">\r\n                    <div class="val-bar">\r\n                      <div class="box1"></div>\r\n                      <div class="box2"></div>\r\n                      <div class="box3"></div>\r\n                      <div class="box4"></div>\r\n                      <div class="box5"></div>\r\n                    </div>\r\n                  </ion-col>\r\n                </ion-row>\r\n                <ion-row>\r\n                  <ion-col size-lg="4.5" size-md="5" size-sm="4.5" size-xs="12">\r\n                    <ion-label [id]="\'item-label-average-\'+model.brand?.name+model.name">\r\n                      <ion-icon name="ribbon" color="dark"></ion-icon>\r\n                      {{model.average?.name}}<br>\r\n                    </ion-label>\r\n                  </ion-col>\r\n                  <ion-col size-lg="4.5" size-md="4" size-sm="4" size-xs="12">\r\n                    <ion-label [id]="\'item-label-category-\'+model.brand?.name+model.name">\r\n                      <ion-icon name="car" color="dark"></ion-icon>\r\n                      {{model.category}}<br>\r\n                    </ion-label>\r\n                  </ion-col>\r\n                  <ion-col size-lg="3" size-md="3" size-sm="3.5" size-xs="12">\r\n                    <ion-label [id]="\'item-label-length-\'+model.brand?.name+model.name">\r\n                      <ion-icon name="clipboard" color="dark"></ion-icon>\r\n                      {{model.val_length}}\r\n                    </ion-label>\r\n                  </ion-col>\r\n                </ion-row>\r\n              </ion-col>\r\n            </ion-row>\r\n          </ion-grid>\r\n        </ion-item>\r\n      </ion-list>\r\n      <ion-infinite-scroll *ngIf="bestModels.length" (ionInfinite)="onIonInfinite($event)">\r\n        <ion-infinite-scroll-content></ion-infinite-scroll-content>\r\n      </ion-infinite-scroll>\r\n    </div>\r\n  </div>\r\n</ion-content>\r\n'}}]);