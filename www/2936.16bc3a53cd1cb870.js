"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2936],{2936:(s,x,n)=>{n.r(x),n.d(x,{MelhoresPageModule:()=>v});var d=n(655),g=n(2096),z=n(9808),u=n(5649),M=n(4182),y=n(3028),B=n(3347),k=n(1301),I=n(5907),c=n(6847),C=n(967),w=n(6364),m=n(7091),P=n(9265);let t=class{constructor(o,r,a,i){this.dbService=o,this.toastController=r,this.router=a,this.utils=i,this.nav=k.k,this.bestModels=[],this.page=1,this.pagination=20}ngOnInit(){this.utils.getShouldUpdate("bests")||this.getBestModels()}ionViewWillEnter(){this.utils.getShouldUpdate("bests")&&(this.utils.setShouldUpdate(["bests"],!1),this.bestModels=[],this.page=1,this.pagination=20,this.getBestModels())}getBestModels(){1===this.page&&(this.showLoader=!0);const o=this.dbService.getItens(C.N.bestModelsAction,this.page.toString(),this.pagination.toString()).subscribe(r=>{o.closed||o.unsubscribe();const a=this.setModelAverages(r.bestModels);this.bestModels=[...this.bestModels,...a],1===this.page&&(this.showLoader=!1),this.page++},r=>{this.showErrorToast(r)})}setModelAverages(o){const r=[],a=this.utils.recoveryCreatedItem("createdBrand"),i=this.utils.recoveryCreatedItem("createdModel");return o.forEach(e=>{const h=!e.brand.review||e.brand.review&&a.find(l=>l._id===e.brand._id),A=!e.review||e.review&&i.find(l=>l._id===e._id);if(e.brand.active&&e.active&&e.val_length>0&&h&&A){const l=e.average,F=l?l.toFixed(1):0,p=w.nV.slice().filter(S=>S.value<=F);e.average=p.length?p[p.length-1]:w.kj,r.push(e)}}),r}showErrorToast(o){let r;switch(o.status){case 404:r=c.Hi;break;case 401:r=c.WY;break;default:r=c.tJ}this.showLoader=!1,console.error(o),this.toastController.create({header:"Aten\xe7\xe3o!",message:r,duration:4e3,position:"middle",icon:"warning-outline",color:"danger"}).then(a=>{a.present()})}clickCarItem(o,r,a){const i=o.target.id,h=`/${!i||i.includes("item-img")||i.includes("item-label")?"opiniao":"opinar"}/${r}/${a}`;this.router.navigate([h])}onIonInfinite(o){this.bestModels.length===(this.page-1)*this.pagination&&this.getBestModels(),setTimeout(()=>{o.target.complete()},500)}};t.ctorParameters=()=>[{type:I.T},{type:u.yF},{type:m.F0},{type:P.F}],t=(0,d.gn)([(0,g.wA2)({selector:"app-melhores",template:y,styles:[B]})],t);var L=n(3529);const R=[{path:"",component:t}];let b=class{};b=(0,d.gn)([(0,g.LVF)({imports:[m.Bz.forChild(R)],exports:[m.Bz]})],b);let v=class{};v=(0,d.gn)([(0,g.LVF)({imports:[z.ez,M.u5,u.Pc,L.m,b],declarations:[t]})],v)},3347:s=>{s.exports=".model-image {\n  max-width: 100px;\n}\n\n.brand-image-title {\n  text-align: right;\n}\n\n.item-button {\n  --padding-start: 0;\n  --inner-padding-end: 0;\n}\n\n.item-button ion-grid {\n  margin: 1rem 0;\n}\n\n.item-button .position {\n  border: 1px solid var(--ion-color-medium);\n  text-align: right;\n  padding: 3px 5px 2px 0;\n  font-weight: bolder;\n  font-size: smaller;\n}\n\n.item-button .car-data ion-icon {\n  font-size: 20px;\n  vertical-align: bottom;\n}\n\n.item-button:nth-child(1) .position {\n  border: 0;\n  background-color: var(--ion-color-secondary);\n}\n\n.item-button:nth-child(2) .position {\n  border: 0;\n  background-color: #BDBDBC;\n}\n\n.item-button:nth-child(3) .position {\n  border: 0;\n  background-color: #DB9656;\n}\n\n.average-row {\n  padding: 1rem;\n  border: 3px solid #000;\n  border-radius: 0.5rem;\n}\n\n.average-row ion-label {\n  font-weight: bold;\n  font-size: x-large;\n}\n\n.average-row ion-icon {\n  transform: scale(1);\n  margin-right: 0.8rem;\n  margin-top: -0.5rem;\n  vertical-align: middle;\n}\n\n.average-row .val-bar {\n  display: flex;\n}\n\n.average-row .val-bar div {\n  width: 9.5%;\n  height: 30px;\n  display: inline-flex;\n  border-bottom: 1px dashed rgba(var(--ion-color-medium-rgb), 0.3);\n  border-top: 1px dashed rgba(var(--ion-color-medium-rgb), 0.3);\n}\n\n.average-row .val-bar div.l {\n  margin-left: 1.5%;\n  border-radius: 0.4rem 0 0 0.4rem;\n  border-left: 1px dashed rgba(var(--ion-color-medium-rgb), 0.3);\n}\n\n.average-row .val-bar div.r {\n  border-radius: 0 0.4rem 0.4rem 0;\n  border-right: 1px dashed rgba(var(--ion-color-medium-rgb), 0.3);\n}\n\n.average-row.otimo {\n  border-color: var(--ion-color-primary);\n}\n\n.average-row.otimo.l .val-bar .box5.l {\n  box-shadow: 5px 0px 0px 0px rgba(var(--ion-color-primary-rgb), 0.4);\n}\n\n.average-row.otimo.l .val-bar div:not(.box5.r) {\n  background-color: var(--ion-color-primary);\n  border: 0;\n}\n\n.average-row.otimo.r .val-bar div {\n  background-color: var(--ion-color-primary);\n  border: 0;\n}\n\n.average-row.bom {\n  border-color: var(--ion-color-success);\n}\n\n.average-row.bom.l .val-bar .box4.l {\n  box-shadow: 5px 0px 0px 0px rgba(var(--ion-color-success-rgb), 0.4);\n}\n\n.average-row.bom.l .val-bar div:not(.box5, .box4.r) {\n  background-color: var(--ion-color-success);\n  border: 0;\n}\n\n.average-row.bom.r .val-bar div:not(.box5) {\n  background-color: var(--ion-color-success);\n  border: 0;\n}\n\n.average-row.regular {\n  border-color: var(--ion-color-secondary);\n}\n\n.average-row.regular.l .val-bar .box3.l {\n  box-shadow: 5px 0px 0px 0px rgba(var(--ion-color-secondary-rgb), 0.4);\n}\n\n.average-row.regular.l .val-bar div:not(.box5, .box4, .box3.r) {\n  background-color: var(--ion-color-secondary);\n  border: 0;\n}\n\n.average-row.regular.r .val-bar div:not(.box5, .box4) {\n  background-color: var(--ion-color-secondary);\n  border: 0;\n}\n\n.average-row.ruim {\n  border-color: var(--ion-color-danger);\n}\n\n.average-row.ruim.l .val-bar .box2.l {\n  box-shadow: 5px 0px 0px 0px rgba(var(--ion-color-danger-rgb), 0.4);\n}\n\n.average-row.ruim.l .val-bar div:not(.box5, .box4, .box3, .box2.r) {\n  background-color: var(--ion-color-danger);\n  border: 0;\n}\n\n.average-row.ruim.r .val-bar div:not(.box5, .box4, .box3) {\n  background-color: var(--ion-color-danger);\n  border: 0;\n}\n\n.average-row.pessimo {\n  border-color: var(--ion-color-danger-secondary);\n}\n\n.average-row.pessimo.l .val-bar .box1.l {\n  box-shadow: 5px 0px 0px 0px rgba(var(--ion-color-danger-secondary-rgb), 0.4);\n}\n\n.average-row.pessimo.l .val-bar div:not(.box5, .box4, .box3, .box2, .box1.r) {\n  background-color: var(--ion-color-danger-secondary);\n  border: 0;\n}\n\n.average-row.pessimo.r .val-bar div:not(.box5, .box4, .box3, .box2) {\n  background-color: var(--ion-color-danger-secondary);\n  border: 0;\n}\n\n.average-row.indisponivel {\n  border-color: var(--ion-color-medium);\n}\n\n@media (max-width: 576px) {\n  .average-row {\n    padding: 1rem 0.5rem;\n  }\n  .average-row ion-col:nth-child(1) {\n    text-align: center;\n    padding-bottom: 1rem;\n  }\n  .average-row .val-bar div {\n    height: 20px;\n    border-radius: 0.3rem;\n  }\n}\n\n.average-small {\n  border: 0px;\n  padding: 0;\n  padding-bottom: 1rem;\n  margin-top: -0.5rem;\n}\n\n.average-small ion-col {\n  padding-bottom: 0px;\n}\n\n.average-small .item-title {\n  text-align: right;\n}\n\n.average-small .item-title h1 {\n  font-weight: bolder;\n  padding-right: 2rem;\n}\n\n.average-small .item-subtitle {\n  text-align: right;\n}\n\n.average-small .item-subtitle p {\n  margin-top: -6px;\n  color: var(--ion-color-medium);\n  font-size: large;\n  font-weight: lighter;\n  padding-right: 2rem;\n}\n\n.average-small .val-bar {\n  margin-top: 0;\n}\n\n.average-small .val-bar div {\n  height: 15px;\n}\n\n.average-small .val-bar div.l {\n  border-radius: 0.2rem 0 0 0.2rem;\n}\n\n.average-small .val-bar div.r {\n  border-radius: 0 0.2rem 0.2rem 0;\n}\n\n@media (max-width: 576px) {\n  .average-small {\n    padding: 0;\n    padding-bottom: 0.5rem;\n    margin-top: -0.5rem;\n  }\n  .average-small .val-bar {\n    margin-top: 0;\n  }\n  .average-small .val-bar div {\n    height: 10px;\n  }\n  .average-small .item-title {\n    text-align: center;\n  }\n  .average-small .item-title h1 {\n    padding-right: 0;\n  }\n  .average-small .item-subtitle {\n    text-align: center;\n  }\n  .average-small .item-subtitle p {\n    padding-right: 0;\n  }\n  .average-small ion-col:nth-child(1) {\n    text-align: center;\n    padding-bottom: 0rem;\n  }\n}"},3028:s=>{s.exports='<ion-content [fullscreen]="true">\r\n  <app-loader [showLoader]="showLoader"></app-loader>\r\n\r\n  <div class="main-container">\r\n    <ion-title size="large" color="primary" class="main-title">\r\n      <ion-icon [name]="nav.best.icon + \'-outline\'" color="secondary"></ion-icon>\r\n      <ion-label>{{nav.best.title}}</ion-label>\r\n    </ion-title>\r\n\r\n    <div class="main-body">\r\n      <ion-list>\r\n        <ion-item *ngIf="!bestModels?.length && !showLoader" lines="none">\r\n          <ion-icon name="alert-circle" color="medium" size="large" class="brand-image"></ion-icon>\r\n          <br>\r\n          <ion-label color="medium" class="ion-text-wrap">N\xe3o encontramos nada no momento. Volte mais tarde!</ion-label>\r\n        </ion-item>\r\n\r\n        <ion-item *ngFor="let model of bestModels; let i = index" class="item-button" routerDirection="root" (click)="clickCarItem($event, model.brand?.url, model?.url)" button>\r\n          <ion-grid>\r\n            <ion-row>\r\n              <ion-col size-lg="0.5" size-md="1" size-sm="1" size-xs="1.5">\r\n                <div class="position">{{i + 1}}</div>\r\n              </ion-col>\r\n              <ion-col size-lg="11" size-md="10" size-sm="10" size-xs="9">\r\n                {{model.brand?.name}} <strong>{{model.name}}</strong>\r\n              </ion-col>\r\n              <ion-col size-lg="0.5" size-md="1" size-sm="1" size-xs="1.5">\r\n                <img src="assets/brands/{{model.brand?.image}}" title="{{model.brand?.name}}" alt="{{model.brand?.name}}"\r\n                  onerror="if (this.src != \'error.jpg\') this.src = \'assets/brands/no-brand.svg\'" class="brand-image-title">\r\n              </ion-col>\r\n            </ion-row>\r\n\r\n            <ion-row>\r\n              <ion-col size-lg="7" size-md="5.5" size-sm="4.25" size-xs="6">\r\n                <img [id]="\'item-img-\'+model.name" src="assets/models/{{model.thumb}}" title="{{model.name}}" alt="{{model.name}}"\r\n                  onerror="if (this.src != \'error.jpg\') this.src = \'assets/models/no-model.png\'" class="model-image">\r\n               </ion-col>\r\n              <ion-col size-lg="5" size-md="6.5" size-sm="7.75" size-xs="6" class="car-data">\r\n                <ion-row class="average-row average-small" [ngClass]="model.average?.id">\r\n                  <ion-col size-md="12" size-sm="12" size-xs="12">\r\n                    <div class="val-bar">\r\n                      <div class="box1 l"></div>\r\n                      <div class="box1 r"></div>\r\n                      <div class="box2 l"></div>\r\n                      <div class="box2 r"></div>\r\n                      <div class="box3 l"></div>\r\n                      <div class="box3 r"></div>\r\n                      <div class="box4 l"></div>\r\n                      <div class="box4 r"></div>\r\n                      <div class="box5 l"></div>\r\n                      <div class="box5 r"></div>\r\n                    </div>\r\n                  </ion-col>\r\n                </ion-row>\r\n                <ion-row>\r\n                  <ion-col size-lg="4.5" size-md="5" size-sm="4.5" size-xs="12">\r\n                    <ion-label [id]="\'item-label-average-\'+model.brand?.name+model.name">\r\n                      <ion-icon name="ribbon" color="dark"></ion-icon>\r\n                      {{model.average?.name}}<br>\r\n                    </ion-label>\r\n                  </ion-col>\r\n                  <ion-col size-lg="4.5" size-md="4" size-sm="4" size-xs="12">\r\n                    <ion-label [id]="\'item-label-category-\'+model.brand?.name+model.name">\r\n                      <ion-icon name="car" color="dark"></ion-icon>\r\n                      {{model.category}}<br>\r\n                    </ion-label>\r\n                  </ion-col>\r\n                  <ion-col size-lg="3" size-md="3" size-sm="3.5" size-xs="12">\r\n                    <ion-label [id]="\'item-label-length-\'+model.brand?.name+model.name">\r\n                      <ion-icon name="clipboard" color="dark"></ion-icon>\r\n                      {{model.val_length}}\r\n                    </ion-label>\r\n                  </ion-col>\r\n                </ion-row>\r\n              </ion-col>\r\n            </ion-row>\r\n          </ion-grid>\r\n        </ion-item>\r\n      </ion-list>\r\n      <ion-infinite-scroll *ngIf="bestModels.length" (ionInfinite)="onIonInfinite($event)">\r\n        <ion-infinite-scroll-content></ion-infinite-scroll-content>\r\n      </ion-infinite-scroll>\r\n    </div>\r\n  </div>\r\n</ion-content>\r\n'}}]);